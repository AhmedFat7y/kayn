!function(e,n){if("function"==typeof define&&define.amd)define("kindred-api",["module","request","chalk"],n);else if("undefined"!=typeof exports)n(module,require("request"),require("chalk"));else{var r={exports:{}};n(r,e.request,e.chalk),e.kindredApi=r.exports}}(this,function(e,n,r){"use strict";function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(n,r,t){return r&&e(n.prototype,r),t&&e(n,t),n}}(),s={BRAZIL:"BR1",EUROPE:"EUN1",EUROPE_WEST:"EUW1",KOREA:"KR",LATIN_AMERICA_NORTH:"LA1",LATIN_AMERICA_SOUTH:"LA2",NORTH_AMERICA:"NA1",OCEANIA:"OC1",RUSSIA:"RU",TURKEY:"TR1",JAPAN:"JP1"},a={BRAZIL:"br",EUROPE:"eune",EUROPE_WEST:"euw",KOREA:"kr",LATIN_AMERICA_NORTH:"lan",LATIN_AMERICA_SOUTH:"las",NORTH_AMERICA:"na",OCEANIA:"oce",RUSSIA:"ru",TURKEY:"tr",JAPAN:"jp"},u={br:"BRAZIL",eune:"EUROPE",euw:"EUROPE_WEST",kr:"KOREA",lan:"LATIN_AMERICA_NORTH",las:"LATIN_AMERICA_SOUTH",na:"NORTH_AMERICA",oce:"OCEANIA",ru:"RUSSIA",tr:"TURKEY",jp:"JAPAN"},l={CHAMPION:1.2,CURRENT_GAME:1,FEATURED_GAMES:1,GAME:1.3,LEAGUE:2.5,STATIC_DATA:1.2,STATUS:1,MATCH:2.2,MATCH_LIST:2.2,RUNES_MASTERIES:1.4,STATS:1.3,SUMMONER:1.4},g={int:function(e){return e.every(function(e){return Number.isInteger(e)})},string:function(e){return e.every(function(e){return"string"==typeof e})}},d={int:function(e){return e&&Array.isArray(e)&&g.int(e)&&e.length>0},string:function(e){return e&&Array.isArray(e)&&g.string(e)&&e.length>0}},m=function(){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.NORTH_AMERICA;t(this,e),this.key=n,this.defaultRegion=r}return o(e,[{key:"_sanitizeName",value:function(e){return e.replace(/\s/g,"").toLowerCase()}},{key:"_validName",value:function(e){return RegExp("^[0-9\\p{L} _\\.]+$").test(e)}},{key:"_makeUrl",value:function(e,n,r,t,i){var o=r?"":n+"/";return"https://"+n+".api.riotgames.com/"+(t||i?i?"":"lol/status/":"api/lol/"+o)+encodeURI(e)+"?api_key="+this.key}},{key:"_baseRequest",value:function(e,t){var i=e.endUrl,o=e.region,s=void 0===o?this.defaultRegion:o,a=e.status,u=void 0!==a&&a,l=e.observerMode,g=void 0!==l&&l,d=e.staticReq,m=void 0!==d&&d,v=e.options,h=void 0===v?{}:v,c=m?"global":s,y=this._makeUrl(i,c,m,u,g);t||console.log(r.red("error: No callback passed in for the method call regarding `"+r.yellow(y)+"`")),n({url:y,qs:h},function(e,n,i){var o=void 0,s=n.statusCode;return s>=200&&s<300?o=r.green(s):s>=400&&s<500?o=r.red(s):s>=500&&(o=r.bold.red(s)),console.log(n&&o,y),e?t(e):t(e,JSON.parse(i))})}},{key:"_observerRequest",value:function(e,n){var r=e.endUrl,t=e.region;return this._baseRequest({endUrl:"observer-mode/rest/"+r,observerMode:!0,region:t},n)}},{key:"_currentGameRequest",value:function(e,n){var r=e.endUrl,t=e.region,i=e.platformId;return this._observerRequest({endUrl:"consumer/getSpectatorGameInfo/"+i+"/"+r,region:t},n)}},{key:"_staticRequest",value:function(e,n){var r=e.endUrl,t=e.region,i=void 0===t?this.defaultRegion:t,o=e.options;return this._baseRequest({endUrl:"static-data/"+i+"/v"+l.STATIC_DATA+"/"+r,staticReq:!0,region:i,options:o},n)}},{key:"_gameRequest",value:function(e,n){var r=e.endUrl,t=e.region;return this._baseRequest({endUrl:"v"+l.GAME+"/game/"+r,region:t},n)}},{key:"_leagueRequest",value:function(e,n){var r=e.endUrl,t=e.region,i=e.options;return this._baseRequest({endUrl:"v"+l.LEAGUE+"/league/"+r,region:t,options:i},n)}},{key:"_statusRequest",value:function(e,n){var r=e.endUrl,t=e.region;return this._baseRequest({endUrl:"v"+l.STATUS+"/"+r,region:t,status:!0},n)}},{key:"_matchRequest",value:function(e,n){var r=e.endUrl,t=e.region,i=e.options;return this._baseRequest({endUrl:"v"+l.MATCH+"/match/"+r,region:t,options:i},n)}},{key:"_matchListRequest",value:function(e,n){var r=e.endUrl,t=e.region,i=e.options;return this._baseRequest({endUrl:"v"+l.MATCH_LIST+"/matchlist/by-summoner/"+r,region:t,options:i},n)}},{key:"_runesMasteriesRequest",value:function(e,n){var r=e.endUrl,t=e.region;return this._summonerRequest({endUrl:r,region:t},n)}},{key:"_statsRequest",value:function(e,n){var r=e.endUrl,t=e.region,i=e.options;return this._baseRequest({endUrl:"v"+l.STATS+"/stats/by-summoner/"+r,region:t,options:i},n)}},{key:"_summonerRequest",value:function(e,n){var r=e.endUrl,t=e.region;return this._baseRequest({endUrl:"v"+l.SUMMONER+"/summoner/"+r,region:t},n)}},{key:"_logError",value:function(e,n){console.log(r.bold.yellow(e),r.red("request"),r.bold.red("FAILED")+r.red("; "+n))}},{key:"setRegion",value:function(e){this.defaultRegion=e}},{key:"getCurrentGame",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.region,o=void 0===t?this.defaultRegion:t,a=n.id,l=n.name,g=arguments[1];if("object"!==i(arguments[0])||(!a||!Number.isInteger(a))&&!l)return this._logError(this.getCurrentGame.name,"required params "+r.yellow("`id` (int)")+" or "+r.yellow("`name` (string)")+" not passed in");var d=s[u[o]];return a||"string"!=typeof l?this._currentGameRequest({endUrl:""+a,platformId:d,region:o},g):this.getSummoner({name:l,region:o},function(n,r){if(console.log(r),!n)return e._currentGameRequest({endUrl:""+r[e._sanitizeName(l)].id,platformId:d,region:o},g)})}},{key:"getFeaturedGames",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,r=arguments[1];return this._observerRequest({endUrl:"featured",region:n},r=n?r:arguments[0])}},{key:"getRecentGames",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.region,i=n.id,o=n.name,s=arguments[1];return i&&Number.isInteger(i)||o?i&&Number.isInteger(i)?this._gameRequest({endUrl:"by-summoner/"+i+"/recent",region:t},s):"string"==typeof o?this.getSummoner({name:o,region:t},function(n,r){return e._gameRequest({endUrl:"by-summoner/"+r[e._sanitizeName(o)].id+"/recent",region:t},s)}):void 0:this._logError(this.getRecentGames.name,"required params "+r.yellow("`id` (int)")+" or "+r.yellow("`name` (string)")+" not passed in")}},{key:"getLeagues",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,r=e.ids,t=(e.id,e.names,e.name,arguments[1]);return d.int(r)?this._leagueRequest({endUrl:"by-summoner/"+r.join(","),region:n},t):Number.isInteger(r)?this._leagueRequest({endUrl:"by-summoner/"+r,region:n},t):void this._logError(this.getLeagues.name,"ids can be either an array of integers or a single integer")}},{key:"getLeagueEntries",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,r=e.ids,t=arguments[1];return d.int(r)?this._leagueRequest({endUrl:"by-summoner/"+r.join(",")+"/entry",region:n},t):Number.isInteger(r)?this._leagueRequest({endUrl:"by-summoner/"+r+"/entry",region:n},t):void this._logError(this.getLeagues.name,"ids can be either an array of integers or a single integer")}},{key:"getChallengers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,r=e.options,t=void 0===r?{type:"RANKED_SOLO_5x5"}:r,i=arguments[1];return this._leagueRequest({endUrl:"challenger",region:n,options:t},i=n?i:arguments[0])}},{key:"getMasters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,r=e.options,t=void 0===r?{type:"RANKED_SOLO_5x5"}:r,i=arguments[1];return this._leagueRequest({endUrl:"master",region:n,options:t},i)}},{key:"getSummoners",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.region,i=n.ids,o=n.id,s=n.names,a=n.name,u=arguments[1];return d.string(s)?this._summonerRequest({endUrl:"by-name/"+s.map(function(n){return e._sanitizeName(n)}).join(","),region:t},u):"string"==typeof s||"string"==typeof a?this._summonerRequest({endUrl:"by-name/"+(s||a),region:t},u):d.int(i)?this._summonerRequest({endUrl:""+i.join(","),region:t},u):Number.isInteger(i)||Number.isInteger(o)?this._summonerRequest({endUrl:""+(i||o),region:t},u):void this._logError(this.getSummoners.name,"required params "+r.yellow("`ids` (array of ints)")+", "+r.yellow("`id` (int)")+", "+r.yellow("`names` (array of strings)")+", or "+r.yellow("`name` (string)")+" not passed in")}},{key:"getSummoner",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,t=e.name,i=e.id,o=arguments[1];return"string"==typeof t?this.getSummoners({region:n,names:[t]},o):Number.isInteger(i)?this.getSummoners({region:n,ids:[i]},o):this._logError(this.getSummoner.name,"required parameters "+r.yellow("`name` (string)")+" or "+r.yellow("`id` (int)")+" not passed in")}},{key:"getSummonerNames",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,r=e.ids,t=arguments[1];return Array.isArray(r)&&r.length>0?this._summonerRequest({endUrl:r.join(",")+"/name",region:n},t):Number.isInteger(r)?this._summonerRequest({endUrl:r+"/name",region:n},t):void this._logError(this.getSummonerNames.name,"ids can be either an array or a single integer")}},{key:"getRankedStats",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,t=e.id,i=e.options,o=arguments[1];return t&&Number.isInteger(t)?this._statsRequest({endUrl:t+"/ranked",region:n,options:i},o):this._logError(this.getRankedStats.name,"required params "+r.yellow("`id` (int)")+" not passed in")}},{key:"getShardStatus",value:function(e,n){var r=e.region;return this._statusRequest({endUrl:"shard",region:r},n=r?n:arguments[0])}},{key:"getShardList",value:function(e,n){var r=e.region;return this._statusRequest({endUrl:"shards",region:r},n=r?n:arguments[0])}},{key:"getMatch",value:function(e,n){var t=e.region,i=e.id,o=e.options,s=void 0===o?{includeTimeline:!0}:o;return i&&Number.isInteger(i)?this._matchRequest({endUrl:""+i,region:t,options:s},n):this._logError(this.getMatch.name,"required params "+r.yellow("`id` (int)")+" not passed in")}},{key:"getMatchList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,t=e.id,i=e.options,o=void 0===i?{type:"RANKED_SOLO_5x5"}:i,s=arguments[1];return t&&Number.isInteger(t)?this._matchListRequest({endUrl:""+t,region:n,options:o},s):this._logError(this.getMatchList.name,"required params "+r.yellow("`id` (int)")+" not passed in")}},{key:"getChampionList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,r=e.options,t=arguments[1];return this._staticRequest({endUrl:"champion",region:n,options:r},t=n||r?t:arguments[0])}},{key:"getChampion",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,t=e.id,i=e.options,o=arguments[1];return t&&Number.isInteger(t)?this._staticRequest({endUrl:"champion/"+t,region:n,options:i},o):this._logError(this.getChampion.name,"required params "+r.yellow("`id` (int)")+" not passed in")}},{key:"getItems",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,r=e.options,t=arguments[1];return this._staticRequest({endUrl:"item",region:n,options:r},t=n||r?t:arguments[0])}},{key:"getItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,t=e.id,i=e.options,o=arguments[1];return t&&Number.isInteger(t)?this._staticRequest({endUrl:"item/"+t,region:n,options:i},o):this._logError(this.getItem.name,"required params "+r.yellow("`id` (int)")+" not passed in")}},{key:"getLanguageStrings",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,r=e.options,t=arguments[1];return this._staticRequest({endUrl:"language-strings",region:n,options:r},t=n?t:arguments[0])}},{key:"getLanguages",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,r=arguments[1];return this._staticRequest({endUrl:"languages",region:n},r=n?r:arguments[0])}},{key:"getMap",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,r=e.options,t=arguments[1];return this._staticRequest({endUrl:"map",region:n,options:r},t=n||r?t:arguments[0])}},{key:"getMasteryList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,r=e.options,t=arguments[1];return this._staticRequest({endUrl:"mastery",region:n,options:r},t=n||r?t:arguments[0])}},{key:"getMastery",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,t=e.id,i=e.options,o=arguments[1];return t&&Number.isInteger(t)?this._staticRequest({endUrl:"mastery/"+t,region:n,options:i},o):this._logError(this.getMastery.name,"required params "+r.yellow("`id` (int)")+" not passed in")}},{key:"getRealm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,r=arguments[1];return this._staticRequest({endUrl:"realm",region:n},r=n?r:arguments[0])}},{key:"getRuneList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,r=e.options,t=arguments[1];return this._staticRequest({endUrl:"rune",region:n,options:r},t=n||r?t:arguments[0])}},{key:"getRune",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,t=e.id,i=e.options,o=arguments[1];return t&&Number.isInteger(t)?this._staticRequest({endUrl:"rune/"+t,region:n,options:i},o):this._logError(this.getRune.name,"required params "+r.yellow("`id` (int)")+" not passed in")}},{key:"getSummonerSpellsList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,r=e.options,t=arguments[1];return this._staticRequest({endUrl:"summoner-spell",region:n,options:r},t=n||r?t:arguments[0])}},{key:"getSummonerSpell",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,t=e.id,i=e.options,o=arguments[1];return t&&Number.isInteger(t)?this._staticRequest({endUrl:"summoner-spell/${id}",region:n,options:i},o):this._logError(this.getSummonerSpell.name,"required params "+r.yellow("`id` (int)")+" not passed in")}},{key:"getVersions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,r=e.options,t=arguments[1];return this._staticRequest({endUrl:"versions",region:n,options:r},t=n||r?t:arguments[0])}},{key:"getRunes",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.region,i=n.ids,o=n.id,s=n.names,a=n.name,u=arguments[1];if(!(i||o||s||a))return this._logError(this.getRunes.name,"required params "+r.yellow("`ids` (array of ints)")+", "+r.yellow("`id` (int)")+", "+r.yellow("`names` (array of strings)")+", or "+r.yellow("`name` (string)")+" not passed in");var l=void 0;return d.int(i)&&(l=i.join(",")),Number.isInteger(i)&&(l=[i]),o&&!Number.isInteger(o)&&(l=[o]),d.string(s)?this.getSummoners({names:s,region:t},function(n,r){var i=[],o=!0,a=!1,l=void 0;try{for(var g,d=s[Symbol.iterator]();!(o=(g=d.next()).done);o=!0){var m=g.value;i.push(r[e._sanitizeName(m)].id)}}catch(e){a=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(a)throw l}}return e._runesMasteriesRequest({endUrl:i.join(",")+"/runes",region:t},u)}):"string"==typeof a?this.getSummoner({name:a,region:t},function(n,r){return e._runesMasteriesRequest({endUrl:r[e._sanitizeName(a)].id+"/runes",region:t},u)}):this._runesMasteriesRequest({endUrl:l+"/runes",region:t},u)}},{key:"getMasteries",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(e.regions,e.ids),t=e.id,i=arguments[1];if(!n&&!t)return this._logError(this.getMasteries.name,"required params "+r.yellow("`ids` (array of ints)")+" or "+r.yellow("`id` (int)")+" not passed in");var o=void 0;return d.int(n)&&(o=n.join(",")),Number.isInteger(n)&&(o=[n]),t&&!Number.isInteger(t)&&(o=[t]),this._runesMasteriesRequest({endUrl:o+"/masteries",region:region},i)}}]),e}();e.exports=m});