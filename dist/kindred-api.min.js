!function(e,n){if("function"==typeof define&&define.amd)define("kindred-api",["module","request","chalk"],n);else if("undefined"!=typeof exports)n(module,require("request"),require("chalk"));else{var t={exports:{}};n(t,e.request,e.chalk),e.kindredApi=t.exports}}(this,function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),s={BRAZIL:"BR1",EUROPE:"EUN1",EUROPE_WEST:"EUW1",KOREA:"KR",LATIN_AMERICA_NORTH:"LA1",LATIN_AMERICA_SOUTH:"LA2",NORTH_AMERICA:"NA1",OCEANIA:"OC1",RUSSIA:"RU",TURKEY:"TR1",JAPAN:"JP1"},a={BRAZIL:"br",EUROPE:"eune",EUROPE_WEST:"euw",KOREA:"kr",LATIN_AMERICA_NORTH:"lan",LATIN_AMERICA_SOUTH:"las",NORTH_AMERICA:"na",OCEANIA:"oce",RUSSIA:"ru",TURKEY:"tr",JAPAN:"jp"},u={br:"BRAZIL",eune:"EUROPE",euw:"EUROPE_WEST",kr:"KOREA",lan:"LATIN_AMERICA_NORTH",las:"LATIN_AMERICA_SOUTH",na:"NORTH_AMERICA",oce:"OCEANIA",ru:"RUSSIA",tr:"TURKEY",jp:"JAPAN"},l={CHAMPION:1.2,CURRENT_GAME:1,FEATURED_GAMES:1,GAME:1.3,LEAGUE:2.5,STATIC_DATA:1.2,STATUS:1,MATCH:2.2,MATCH_LIST:2.2,RUNES_MASTERIES:1.4,STATS:1.3,SUMMONER:1.4},g={int:function(e){return e.every(function(e){return Number.isInteger(e)})},string:function(e){return e.every(function(e){return"string"==typeof e})}},d={int:function(e){return e&&Array.isArray(e)&&g.int(e)&&e.length>0},string:function(e){return e&&Array.isArray(e)&&g.string(e)&&e.length>0}},m=function(){function e(n){var t=n.key,i=n.defaultRegion,o=void 0===i?a.NORTH_AMERICA:i,s=n.debug,u=void 0!==s&&s;r(this,e),this.key=t,this.defaultRegion=o,this.debug=u}return o(e,[{key:"_sanitizeName",value:function(e){return e.replace(/\s/g,"").toLowerCase()}},{key:"_validName",value:function(e){return RegExp("^[0-9\\p{L} _\\.]+$").test(e)}},{key:"_makeUrl",value:function(e,n,t,r,i){var o=t?"":n+"/";return"https://"+n+".api.riotgames.com/"+(r||i?i?"":"lol/status/":"api/lol/"+o)+encodeURI(e)+"?api_key="+this.key}},{key:"_baseRequest",value:function(e,r){var i=this,o=e.endUrl,s=e.region,a=void 0===s?this.defaultRegion:s,u=e.status,l=void 0!==u&&u,g=e.observerMode,d=void 0!==g&&g,m=e.staticReq,h=void 0!==m&&m,v=e.options,y=void 0===v?{}:v,c=h?"global":a,f=this._makeUrl(o,c,h,l,d);r||console.log(t.red("error: No callback passed in for the method call regarding `"+t.yellow(f)+"`")),n({url:f,qs:y},function(e,n,o){var s=void 0,a=n.statusCode;return a>=200&&a<300?s=t.green(a):a>=400&&a<500?s=t.red(a):a>=500&&(s=t.bold.red(a)),i.debug&&(console.log(n&&s,f),console.log("x-app-rate-limit-count",n.headers["x-app-rate-limit-count"]),console.log("x-method-rate-limit-count",n.headers["x-method-rate-limit-count"]),console.log("x-rate-limit-count",n.headers["x-rate-limit-count"]),console.log("retry-after",n.headers["retry-after"])),e?r(e):r(e,JSON.parse(o))})}},{key:"_observerRequest",value:function(e,n){var t=e.endUrl,r=e.region;return this._baseRequest({endUrl:"observer-mode/rest/"+t,observerMode:!0,region:r},n)}},{key:"_currentGameRequest",value:function(e,n){var t=e.endUrl,r=e.region,i=e.platformId;return this._observerRequest({endUrl:"consumer/getSpectatorGameInfo/"+i+"/"+t,region:r},n)}},{key:"_staticRequest",value:function(e,n){var t=e.endUrl,r=e.region,i=void 0===r?this.defaultRegion:r,o=e.options;return this._baseRequest({endUrl:"static-data/"+i+"/v"+l.STATIC_DATA+"/"+t,staticReq:!0,region:i,options:o},n)}},{key:"_gameRequest",value:function(e,n){var t=e.endUrl,r=e.region;return this._baseRequest({endUrl:"v"+l.GAME+"/game/"+t,region:r},n)}},{key:"_leagueRequest",value:function(e,n){var t=e.endUrl,r=e.region,i=e.options;return this._baseRequest({endUrl:"v"+l.LEAGUE+"/league/"+t,region:r,options:i},n)}},{key:"_statusRequest",value:function(e,n){var t=e.endUrl,r=e.region;return this._baseRequest({endUrl:"v"+l.STATUS+"/"+t,region:r,status:!0},n)}},{key:"_matchRequest",value:function(e,n){var t=e.endUrl,r=e.region,i=e.options;return this._baseRequest({endUrl:"v"+l.MATCH+"/match/"+t,region:r,options:i},n)}},{key:"_matchListRequest",value:function(e,n){var t=e.endUrl,r=e.region,i=e.options;return this._baseRequest({endUrl:"v"+l.MATCH_LIST+"/matchlist/by-summoner/"+t,region:r,options:i},n)}},{key:"_runesMasteriesRequest",value:function(e,n){var t=e.endUrl,r=e.region;return this._summonerRequest({endUrl:t,region:r},n)}},{key:"_statsRequest",value:function(e,n){var t=e.endUrl,r=e.region,i=e.options;return this._baseRequest({endUrl:"v"+l.STATS+"/stats/by-summoner/"+t,region:r,options:i},n)}},{key:"_summonerRequest",value:function(e,n){var t=e.endUrl,r=e.region;return this._baseRequest({endUrl:"v"+l.SUMMONER+"/summoner/"+t,region:r},n)}},{key:"_logError",value:function(e,n){console.log(t.bold.yellow(e),t.red("request"),t.bold.red("FAILED")+t.red("; "+n))}},{key:"setRegion",value:function(e){this.defaultRegion=e}},{key:"getCurrentGame",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.region,o=void 0===r?this.defaultRegion:r,a=n.id,l=n.name,g=arguments[1];if("object"!==i(arguments[0])||(!a||!Number.isInteger(a))&&!l)return this._logError(this.getCurrentGame.name,"required params "+t.yellow("`id` (int)")+" or "+t.yellow("`name` (string)")+" not passed in");var d=s[u[o]];return a||"string"!=typeof l?this._currentGameRequest({endUrl:""+a,platformId:d,region:o},g):this.getSummoner({name:l,region:o},function(n,t){if(console.log(t),!n)return e._currentGameRequest({endUrl:""+t[e._sanitizeName(l)].id,platformId:d,region:o},g)})}},{key:"getFeaturedGames",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,t=arguments[1];return this._observerRequest({endUrl:"featured",region:n},t=n?t:arguments[0])}},{key:"getRecentGames",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.region,o=n.id,s=n.name,a=arguments[1];return o&&Number.isInteger(o)?this._gameRequest({endUrl:"by-summoner/"+o+"/recent",region:r},a):"object"===i(arguments[0])&&"string"==typeof s?this.getSummoner({name:s,region:r},function(n,t){return e._gameRequest({endUrl:"by-summoner/"+t[e._sanitizeName(s)].id+"/recent",region:r},a)}):this._logError(this.getRecentGames.name,"required params "+t.yellow("`id` (int)")+" or "+t.yellow("`name` (string)")+" not passed in")}},{key:"getLeagues",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.region,o=n.ids,s=n.id,a=n.names,u=n.name,l=arguments[1];return console.log(u),d.int(o)?this._leagueRequest({endUrl:"by-summoner/"+o.join(","),region:r},l):Number.isInteger(o)||Number.isInteger(s)?this._leagueRequest({endUrl:"by-summoner/"+(o||s),region:r},l):d.string(a)?this.getSummoners({names:a,region:r},function(n,t){var i=[],o=!0,s=!1,u=void 0;try{for(var g,d=a[Symbol.iterator]();!(o=(g=d.next()).done);o=!0){var m=g.value;i.push(t[e._sanitizeName(m)].id)}}catch(e){s=!0,u=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw u}}return e._leagueRequest({endUrl:"by-summoner/"+i.join(","),region:r},l)}):"object"!==i(arguments[0])||"string"!=typeof a&&"string"!=typeof u?this._logError(this.getLeagues.name,"required params "+t.yellow("`ids` (array of ints)")+", "+t.yellow("`id` (int)")+", "+t.yellow("`names` (array of strings)")+", or "+t.yellow("`name` (string)")+" not passed in"):this.getSummoner({name:a||u,region:r},function(n,t){return e._leagueRequest({endUrl:"by-summoner/"+t[e._sanitizeName(a||u)].id,region:r},l)})}},{key:"getLeagueEntries",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.region,o=n.ids,s=n.id,a=n.names,u=n.name,l=arguments[1];return d.int(o)?this._leagueRequest({endUrl:"by-summoner/"+o.join(",")+"/entry",region:r},l):Number.isInteger(o)||Number.isInteger(s)?this._leagueRequest({endUrl:"by-summoner/"+(o||s)+"/entry",region:r},l):d.string(a)?this.getSummoners({names:a,region:r},function(n,t){var i=[],o=!0,s=!1,u=void 0;try{for(var g,d=a[Symbol.iterator]();!(o=(g=d.next()).done);o=!0){var m=g.value;i.push(t[e._sanitizeName(m)].id)}}catch(e){s=!0,u=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw u}}return e._leagueRequest({endUrl:"by-summoner/"+i.join(",")+"/entry",region:r},l)}):"object"!==i(arguments[0])||"string"!=typeof a&&"string"!=typeof u?void this._logError(this.getLeagueEntries.name,"required params "+t.yellow("`ids` (array of ints)")+", "+t.yellow("`id` (int)")+", "+t.yellow("`names` (array of strings)")+", or "+t.yellow("`name` (string)")+" not passed in"):this.getSummoner({name:a||u,region:r},function(n,t){return e._leagueRequest({endUrl:"by-summoner/"+t[e._sanitizeName(a||u)].id+"/entry",region:r},l)})}},{key:"getChallengers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,t=e.options,r=void 0===t?{type:"RANKED_SOLO_5x5"}:t,i=arguments[1];return this._leagueRequest({endUrl:"challenger",region:n,options:r},i=n?i:arguments[0])}},{key:"getMasters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,t=e.options,r=void 0===t?{type:"RANKED_SOLO_5x5"}:t,i=arguments[1];return this._leagueRequest({endUrl:"master",region:n,options:r},i)}},{key:"getSummoners",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.region,o=n.ids,s=n.id,a=n.names,u=n.name,l=arguments[1];return d.int(o)?this._summonerRequest({endUrl:""+o.join(","),region:r},l):Number.isInteger(o)||Number.isInteger(s)?this._summonerRequest({endUrl:""+(o||s),region:r},l):d.string(a)?this._summonerRequest({endUrl:"by-name/"+a.map(function(n){return e._sanitizeName(n)}).join(","),region:r},l):"object"!==i(arguments[0])||"string"!=typeof a&&"string"!=typeof u?void this._logError(this.getSummoners.name,"required params "+t.yellow("`ids` (array of ints)")+", "+t.yellow("`id` (int)")+", "+t.yellow("`names` (array of strings)")+", or "+t.yellow("`name` (string)")+" not passed in"):this._summonerRequest({endUrl:"by-name/"+(a||u),region:r},l)}},{key:"getSummoner",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,r=e.id,o=e.name,s=arguments[1];return Number.isInteger(r)?this.getSummoners({region:n,ids:[r]},s):"object"===i(arguments[0])&&"string"==typeof o?this.getSummoners({region:n,names:[o]},s):this._logError(this.getSummoner.name,"required params "+t.yellow("`id` (int)")+" or "+t.yellow("`name` (string)")+" not passed in")}},{key:"getSummonerNames",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,t=e.ids,r=arguments[1];return Array.isArray(t)&&t.length>0?this._summonerRequest({endUrl:t.join(",")+"/name",region:n},r):Number.isInteger(t)?this._summonerRequest({endUrl:t+"/name",region:n},r):void this._logError(this.getSummonerNames.name,"ids can be either an array or a single integer")}},{key:"getRankedStats",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,r=e.id,i=e.options,o=arguments[1];return r&&Number.isInteger(r)?this._statsRequest({endUrl:r+"/ranked",region:n,options:i},o):this._logError(this.getRankedStats.name,"required params "+t.yellow("`id` (int)")+" not passed in")}},{key:"getShardStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,t=arguments[1];return this._statusRequest({endUrl:"shard",region:n},t=n?t:arguments[0])}},{key:"getShardList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,t=arguments[1];return this._statusRequest({endUrl:"shards",region:n},t=n?t:arguments[0])}},{key:"getMatch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,r=e.id,i=e.options,o=void 0===i?{includeTimeline:!0}:i,s=arguments[1];return r&&Number.isInteger(r)?this._matchRequest({endUrl:""+r,region:n,options:o},s):this._logError(this.getMatch.name,"required params "+t.yellow("`id` (int)")+" not passed in")}},{key:"getMatchList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,r=e.id,i=e.options,o=void 0===i?{type:"RANKED_SOLO_5x5"}:i,s=arguments[1];return r&&Number.isInteger(r)?this._matchListRequest({endUrl:""+r,region:n,options:o},s):this._logError(this.getMatchList.name,"required params "+t.yellow("`id` (int)")+" not passed in")}},{key:"getChampionList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,t=e.options,r=arguments[1];return this._staticRequest({endUrl:"champion",region:n,options:t},r=n||t?r:arguments[0])}},{key:"getChampion",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,r=e.id,i=e.options,o=arguments[1];return r&&Number.isInteger(r)?this._staticRequest({endUrl:"champion/"+r,region:n,options:i},o):this._logError(this.getChampion.name,"required params "+t.yellow("`id` (int)")+" not passed in")}},{key:"getItems",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,t=e.options,r=arguments[1];return this._staticRequest({endUrl:"item",region:n,options:t},r=n||t?r:arguments[0])}},{key:"getItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,r=e.id,i=e.options,o=arguments[1];return r&&Number.isInteger(r)?this._staticRequest({endUrl:"item/"+r,region:n,options:i},o):this._logError(this.getItem.name,"required params "+t.yellow("`id` (int)")+" not passed in")}},{key:"getLanguageStrings",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,t=e.options,r=arguments[1];return this._staticRequest({endUrl:"language-strings",region:n,options:t},r=n?r:arguments[0])}},{key:"getLanguages",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,t=arguments[1];return this._staticRequest({endUrl:"languages",region:n},t=n?t:arguments[0])}},{key:"getMap",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,t=e.options,r=arguments[1];return this._staticRequest({endUrl:"map",region:n,options:t},r=n||t?r:arguments[0])}},{key:"getMasteryList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,t=e.options,r=arguments[1];return this._staticRequest({endUrl:"mastery",region:n,options:t},r=n||t?r:arguments[0])}},{key:"getMastery",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,r=e.id,i=e.options,o=arguments[1];return r&&Number.isInteger(r)?this._staticRequest({endUrl:"mastery/"+r,region:n,options:i},o):this._logError(this.getMastery.name,"required params "+t.yellow("`id` (int)")+" not passed in")}},{key:"getRealm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,t=arguments[1];return this._staticRequest({endUrl:"realm",region:n},t=n?t:arguments[0])}},{key:"getRuneList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,t=e.options,r=arguments[1];return this._staticRequest({endUrl:"rune",region:n,options:t},r=n||t?r:arguments[0])}},{key:"getRune",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,r=e.id,i=e.options,o=arguments[1];return r&&Number.isInteger(r)?this._staticRequest({endUrl:"rune/"+r,region:n,options:i},o):this._logError(this.getRune.name,"required params "+t.yellow("`id` (int)")+" not passed in")}},{key:"getSummonerSpellsList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,t=e.options,r=arguments[1];return this._staticRequest({endUrl:"summoner-spell",region:n,options:t},r=n||t?r:arguments[0])}},{key:"getSummonerSpell",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,r=e.id,i=e.options,o=arguments[1];return r&&Number.isInteger(r)?this._staticRequest({endUrl:"summoner-spell/${id}",region:n,options:i},o):this._logError(this.getSummonerSpell.name,"required params "+t.yellow("`id` (int)")+" not passed in")}},{key:"getVersions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.region,t=e.options,r=arguments[1];return this._staticRequest({endUrl:"versions",region:n,options:t},r=n||t?r:arguments[0])}},{key:"getRunes",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.region,o=n.ids,s=n.id,a=n.names,u=n.name,l=arguments[1];return d.int(o)?this._runesMasteriesRequest({endUrl:o.join()+"/runes",region:r},l):Number.isInteger(o)||Number.isInteger(s)?this._runesMasteriesRequest({endUrl:(o||s)+"/runes",region:r},l):d.string(a)?this.getSummoners({names:a,region:r},function(n,t){var i=[],o=!0,s=!1,u=void 0;try{for(var g,d=a[Symbol.iterator]();!(o=(g=d.next()).done);o=!0){var m=g.value;i.push(t[e._sanitizeName(m)].id)}}catch(e){s=!0,u=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw u}}return e._runesMasteriesRequest({endUrl:i.join(",")+"/runes",region:r},l)}):"object"!==i(arguments[0])||"string"!=typeof a&&"string"!=typeof u?this._logError(this.getRunes.name,"required params "+t.yellow("`ids` (array of ints)")+", "+t.yellow("`id` (int)")+", "+t.yellow("`names` (array of strings)")+", or "+t.yellow("`name` (string)")+" not passed in"):this.getSummoner({name:a||u,region:r},function(n,t){return e._runesMasteriesRequest({endUrl:t[e._sanitizeName(a||u)].id+"/runes",region:r},l)})}},{key:"getMasteries",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.region,o=n.ids,s=n.id,a=n.names,u=n.name,l=arguments[1];return d.int(o)?this._runesMasteriesRequest({endUrl:o.join()+"/masteries",region:r},l):Number.isInteger(o)||Number.isInteger(s)?this._runesMasteriesRequest({endUrl:(o||s)+"/masteries",region:r},l):d.string(a)?this.getSummoners({names:a,region:r},function(n,t){var i=[],o=!0,s=!1,u=void 0;try{for(var g,d=a[Symbol.iterator]();!(o=(g=d.next()).done);o=!0){var m=g.value;i.push(t[e._sanitizeName(m)].id)}}catch(e){s=!0,u=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw u}}return e._runesMasteriesRequest({endUrl:i.join(",")+"/masteries",region:r},l)}):"object"!==i(arguments[0])||"string"!=typeof a&&"string"!=typeof u?this._logError(this.getMasteries.name,"required params "+t.yellow("`ids` (array of ints)")+", "+t.yellow("`id` (int)")+", "+t.yellow("`names` (array of strings)")+", or "+t.yellow("`name` (string)")+" not passed in"):(console.log(r,s,u),this.getSummoner({name:a||u,region:r},function(n,t){return e._runesMasteriesRequest({endUrl:t[e._sanitizeName(a||u)].id+"/masteries",region:r},l)}))}}]),e}();e.exports=m});